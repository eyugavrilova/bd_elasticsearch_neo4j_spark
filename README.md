# bd_elasticsearch_neo4j_spark
ТЗ

Elasticsearch.
1. Типы документов (json):
Баннер:
{index, doc_type, id, body: {дата_заказа, заказчик, рекламная_компания, требования_к_размещению*,  ссылка_на_изображение, ранг, [клиент*]}}
Клик (по баннеру):
{index, doc_type, id, body: {id_баннера, дата,  IP_клиента, URL_сайта, [UTM_метка]}}
Примечание. Квадратные скобки [] обозначает тег (может быть несколько значений)
2. Требование к анализатору:
поля, отмеченные *, разделить на слова, убрать пунктуацию с помощью токенизатора standart (русский), перевести все токены в нижний регистр, убрать токены, находящиеся в списке стоп-слов, выполнить стемминг оставшихся токенов с помощью фильтра snowball.
3. Запросы с вложенной агрегацией:
- разбить баннеры по дате заказа с периодом 1 месяц, для каждой группы определить средний ранг по рекламным агенствам,
- определить число кликов по URL-сайтам.

Neo4j.
1. По данным из Elasticsearch заполнить графовую базу данных «Клиент (IP_клиента) – Щёлкал(число раз) – Баннер(ранг, URL_сайта)
Примечание.  В скобках приведены свойства узлов и отношений (связей). При построении графа использовать вложенную агрегацию для документов «Клик».
2. Разработать и реализовать запрос: к какому баннеру было больше всего обращений. 

Spark
1. По данным из Elasticsearch сформировать csv-файлы (с внутренней схемой) таблиц «Баннер», «Клик» и сохранить их в файловой системе HDFS. 
2. Написать запрос select : найти число кликов по баннеру.
3. Реализовать этот запрос в Spark. Построить временную диаграмму его выполнения по результатам работы монитора.

